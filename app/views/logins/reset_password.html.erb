<script>
	function validateFields() {
		$('.error_messages').html('');
		var flag;
		if ($('#old_password').val().trim() == "") {
			$('#old_password_error_message').html("Please enter your old password");
			$('#password_error_message').html("");
			$('#confirm_password_error_message').html("");
			flag = false;
		}

		if ($('#password').val().trim() == "" && $('#password_confirmation').val().trim() == "") {
			if (flag != false) {
				$('#old_password_error_message').html("");
				$('#password_error_message').html("Please enter new password");
				$('#confirm_password_error_message').html("Please enter confirmation password.");
				flag = false;
			}
		}
		if ($('#password').val() != $('#password_confirmation').val()) {
			if (flag != false) {
				$('#old_password_error_message').html("");
				$('#password_error_message').html("");
				$('#confirm_password_error_message').html("New Password and Confirm Password should match");
				flag = false;
			}
		}

		if (flag == false) {
			return false;
		}

		return true;
	}
</script>
<div class="">
	<div id="RC_Login_Wraper">
		<div id="RC_Login_Box">
			<%= form_for @login, :url => login_save_changed_password_path(@login) do |f| %>
			<table width="100%" border="0" cellspacing="0" cellpadding="2">
				<tr>
				    <td>
				        <h4>Reset Password</h4>
				    </td>
				</tr>
				<tr>
					<td>
						<label class="field_with_errors message notice" style="color: red">
							<%= flash[:notice] if flash[:notice].present? %>
						</label>
					</td>
				</tr>	
				<tr>
				    <td>
				        <label class="subhead">Username or Email</label>
				    </td>
				</tr>
				<tr>
				    <td>
				        <%= f.text_field :user_name, :class => '', :readonly => true %>
                        <%= f.hidden_field :id %>
				    </td>
				</tr>
				<tr>
				    <td>
				        <label class="subhead">Old Password</label>
				    </td>
				</tr>
				<tr>
				    <td>
				        <%= f.password_field :old_password, :id => 'old_password', :style => "" %>
				    </td>
				</tr>
				<tr>
				    <td>
				        <label style="color: #FF0000; font-size: 12px;" id="old_password_error_message"></label>
				    </td>
				</tr>
				<tr>
				    <td>
				        <label class="subhead">New Password</label>
				    </td>
				</tr>
				<tr>
				    <td>
				        <%= f.password_field :password, :id => 'password', :style => "" %>
				    </td>
				</tr>
				<tr>
				    <td>
				        <label style="color: #FF0000; font-size: 12px;" id="password_error_message"></label>
				    </td>
				</tr>
				<tr>
				    <td>
				        <label class="subhead">Confirm Password</label>
				    </td>
				</tr>
				<tr>
				    <td>
				        <%= f.password_field :password_confirmation, :id => 'password_confirmation', :style => "" %>
				    </td>
				</tr>
				<tr>
				    <td>
				        <label style="color: #FF0000; font-size: 12px;" id="confirm_password_error_message"></label>
				    </td>
				</tr>
				<tr>
                    <td>
                        <%= f.submit "Reset", :class => 'loginbtn', :onclick => 'return validateFields();' %>
                        <%= f.submit "Cancel", :class=>'loginbtn' %>
                    </td>
                </tr>
			</table>
			<% end %>
		</div><!--RC_Login_Box-->
	</div><!--RC_Login_Wraper-->
	<div class="clear"></div>
</div><!-- END LEFT COL OF MAIN CONTENT-->

<div class="">

</div><!-- END RIGHT SIDE BAR COL OF MAIN CONTENT-->
<div class="clear"></div>